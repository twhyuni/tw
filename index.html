<!DOCTYPE html>
<html>
<head>
	<title>테일즈위버 대미지 계산기</title>
	<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="semantic/semantic.min.css">
<script src="jquery-3.2.1.min.js"></script>
<script src="semantic/semantic.min.js"></script> <!--이거 지우면 계산은 되고 제목줄은 안되고, 놔두면 제목줄은되는데 계산이안됨-->
<script src="skilllist.js"></script>

</head>

<body>
  <p><h3>테일즈위버 대미지 계산기</h3></p>

  <div class="main menu" style="width:100%;background:white;">

<table style="text-align: center; width:100%" border=1>
<thead>
<tr>
<th colspan="18">공격 캐릭터 정보</th>
</tr>
</thead> 
<tbody> 
<tr>
<td colspan="4">기본정보</td>
<td colspan="2">스탯</td>
<td colspan="4">장비</td>
<td colspan="2">습득스킬</td>
<td colspan="2">본인/팀원 정보</td>
<td colspan="4">아이템, 기타</td>
</tr>
<tr>
<td>룬레벨</td>
<td></td>
<td>무기연마</td>
<td></td>
<td>STAB</td>
<td><input type="number" id="input_stab" style="width:50px;" class="statinput"></td>
<td>찌르기</td>
<td></td>
<td>투구어빌(극한이전)</td>
<td></td>
<td>신의방패</td>
<td></td>
<td>비호버프 효율</td>
<td></td>
<td>각성의 비약</td>
<td></td>
<td>승자의증표 소지</td>
<td></td>
</tr>

<tr>
<td>각성회차</td>
<td></td>
<td>보급무연</td>
<td></td>
<td>HACK</td>
<td><input type="number" id="input_hack" style="width:50px;" class="statinput"></td>
<td>베기</td>
<td></td>
<td>투구어빌공격력(시드)</td>
<td></td>
<td>약점간파</td>
<td></td>
<td>찬솔렛 극한여부</td>
<td></td>
<td>쌍둥이경단</td>
<td></td>
<td>기타 합연산</td>
<td></td>
</tr>
<tr>
<td>극한</td>
<td></td>
<td>콤보연마</td>
<td></td>
<td>INT</td>
<td><input type="number" id="input_int" style="width:50px;" class="statinput"></td>
<td>마공</td>
<td></td>
<td>아티펙트</td>
<td></td>
<td>신속의미학</td>
<td></td>
<td>로아극한,포이즌마스터</td>
<td></td>
<td>괴력의물약</td>
<td></td>
<td>기타 곱연산</td>
<td></td>
</tr>
<tr>
<td>속성합계</td>
<td></td>
<td>보급콤연</td>
<td></td>
<td>MR</td>
<td><input type="number" id="input_mr" style="width:50px;" class="statinput"></td>
<td>마방</td>
<td></td>
<td>진암페/땅문장</td>
<td></td>
<td>벤야마스터리1단계</td>
<td></td>
<td>콤보사용</td>
<td></td>
<td>괴력의햄/이공간</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>DEX</td>
<td><input type="number" id="input_dex" style="width:50px;" class="statinput"></td>
<td>어빌댐증(%)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>도발</td>
<td></td>
<td>달빛의축복</td>
<td></td>
<td></td>
<td></td>
</tr></tbody></table>

<table style="text-align: center; width:100%"  border=1>
<thead>
<tr>
<th colspan="18">피격 몬스터 정보</th>
</tr>
</thead>
<tbody>
<tr>
<td>이름</td>
<td></td>
<td>디버프</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>물리방어력</td>
<td></td>
<td>아나이스 평타</td>
<td></td>
<td>쇠약</td>
<td></td>
<td>찬솔렛3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>마법방어력</td>
<td></td>
<td>비호 초록장판</td>
<td></td>
<td>러스트아머</td>
<td></td>
<td>독설</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>속성</td>
<td></td>
<td>로아미니 장판</td>
<td></td>
<td>브레이크아머</td>
<td></td>
<td>커스</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody> 

</table>




<table width=100%>
  <thead>
    <tr>
      <th width=10% height=30>캐릭터</th>
      <th width=30%>스킬명</th>
      <th width=10%>공격력</th>
      <th width=10%>타수</th>
      <th width=10%>크리배율</th>
      <th width=30%>대미지</th>
    </tr>
  </thead></table>

  </div>

<section id="content"></section>
<table class="ui very compact striped table" id="skilltable">

<thead>
    <tr>
      <th width=10% style="text-align: center">
      	<select id="cha_name" onchange="h_filter()">
      		<option value="">전체</option>
      		<option value="나야">나야</option>
      		<option value="녹턴">녹턴</option>
      		<option value="란지에">란지에</option>
      		<option value="로아미니">로아미니</option>
      		<option value="루시안">루시안</option>
      		<option value="막시민">막시민</option>
      		<option value="밀라">밀라</option>
      		<option value="벤야">벤야</option>
      		<option value="보리스">보리스</option>
      		<option value="시벨린">시벨린</option>
      		<option value="아나이스">아나이스</option>
      		<option value="이솔렛">이솔렛</option>
      		<option value="이스핀">이스핀</option>
      		<option value="이자크">이자크</option>
      		<option value="조슈아">조슈아</option>
      		<option value="클로에">클로에</option>
      		<option value="티치엘">티치엘</option>
      	</select>
      </th>
      <th width=30%>
      	
      </th>
      <th width=10%></th>
      <th width=10%></th>
      <th width=10%></th>
      <th width=30%></th>
    </tr>
  </thead>
  <tbody>

	
	<script type="text/javascript">
	for(var i=0; i<skilllist.length; i++){
		document.write("<tr><td style=\"text-align: center\">",skilllist[i].캐릭터,"</td><td>",skilllist[i].스킬,"</td><td style=\"text-align: center\">",skilllist[i].스킬공격력,"</td><td style=\"text-align: center\">",skilllist[i].타격수,"</td><td style=\"text-align: center\">",skilllist[i].크리배율,"</td><td style=\"text-align: center\"><span class=\"damage\">0</span></td style=\"text-align: center\"></tr>");
	}


</script>




  </tbody>
</table>

	  <script>



	function CALdamage(){
	var damage = document.querySelectorAll('.damage');

		for (var i=0; i<damage.length; i++){


				if(skilllist[i].계열=="STAB"){
					var factor_stat = Math.floor((input_stab.value*2.1)+(input_hack.value*1.08));}
				else if(skilllist[i].계열=="HACK"){
					var factor_stat = Math.floor((input_stab.value*1.08)+(input_hack.value*2.1));}
				else if(skilllist[i].계열=="STAB+HACK"){
					var factor_stat = Math.floor((input_stab.value*1.8)+(input_hack.value*1.8));}
				else if(skilllist[i].계열=="HACK+INT"){
					var factor_stat = Math.floor((input_hack.value*1.8)+(input_int.value*1.5));}
				else if(skilllist[i].계열=="STAB+INT"){
					var factor_stat = Math.floor((input_stab.value*1.8)+(input_int.value*1.5));}
				else if(skilllist[i].계열=="INT"){
					var factor_stat = Math.floor((input_int.value*2.4)+(input_mr.value*0.6));}
				else if(skilllist[i].계열=="MR"){
					var factor_stat = Math.floor((input_int.value*0.45)+(input_mr.value*2.55));}
				else{var factor_stat = 0;}
		damage[i].innerHTML=Math.round(factor_stat*skilllist[i].스킬공격력*skilllist[i].크리배율);

		}

	}
function h_filter() {
  var cha_name, filter, table, tr, td, i;
  cha_name = document.getElementById("cha_name");
  filter = cha_name.value.toUpperCase();
  table = document.getElementById("skilltable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    } 
  }
}

$(".statinput").on("keyup change", CALdamage);


$('.main.menu').visibility({type: 'fixed'});

		  
var xhr = new XMLHttpRequest();                 // XMLHttpRequest 객체를 생성한다

xhr.onload = function() {                       // readystate 값이 변경되면
  // 아래 조건식은 로컬 환경에서는 동작하지 않으며 서버가 있어야만 동작한다
  if(xhr.status === 200) {                      // 서버의 응답이 정상이면
    responseObject = JSON.parse(xhr.responseText);

    // 새로운 콘텐츠를 생성한다 (DOM 조작을 사용한다)
    var newContent = '';
    for (var i = 0; i < responseObject.skilllist.length; i++) { // 루프를 실행한다
      newContent += '<div>';
      newContent += responseObject.skilllist[i].캐릭터 + '</p></div>';
    }

    // 새로운 콘텐츠로 페이지를 수정한다
    document.getElementById('content').innerHTML = newContent;

  }
};

xhr.open('GET', 'data/data.json', true);        // 요청을 준비한다
xhr.send(null);                                 // 요청을 전송한다
		  
</script>

</body>
</html>
